openapi: 3.1.0
info:
  title: Grid API
  description: >
    API for managing global payments on the open Money Grid. Built by
    Lightspark. See the full documentation at https://grid.lightspark.com/.
  version: '2025-10-13'
  contact:
    name: Lightspark Support
    email: support@lightspark.com
  license:
    name: Proprietary
    url: https://lightspark.com/terms
servers:
  - url: https://api.lightspark.com/grid/2025-10-13
    description: Production server
security:
  - BasicAuth: []
tags:
  - name: Platform Configuration
    description: >-
      Platform configuration endpoints for managing global settings. You can
      also configure these settings in the Grid dashboard.
  - name: Customers
    description: >-
      Customer management endpoints for creating and updating customer
      information
  - name: Internal Accounts
    description: >-
      Internal account management endpoints for creating and managing internal
      accounts
  - name: External Accounts
    description: >-
      External account management endpoints for creating and managing external
      bank accounts
  - name: Same-Currency Transfers
    description: >-
      Endpoints for transferring funds between internal and external accounts
      with the same currency
  - name: Cross-Currency Transfers
    description: Endpoints for creating and confirming quotes for cross-currency transfers
  - name: Transactions
    description: Endpoints for retrieving transaction information
  - name: Webhooks
    description: Webhook endpoints and configuration for receiving notifications
  - name: Invitations
    description: Endpoints for creating, claiming and managing UMA invitations
  - name: Sandbox
    description: Endpoints to trigger test cases in sandbox
  - name: API Tokens
    description: Endpoints to programmatically manage API tokens
  - name: Exchange Rates
    description: >-
      Endpoints for retrieving cached foreign exchange rates. Rates are cached
      for approximately 5 minutes and include platform-specific fees.
paths:
  /customers/external-accounts:
    post:
      tags:
        - External Accounts
      summary: Add a new external account
      description: >-
        Register a new external bank account for a customer.


        **Sandbox Testing:** In sandbox mode, use these account number patterns
        to test different transfer scenarios. These patterns should be used with
        the primary alias, address, or identifier of whatever account type
        you're testing. For example, the US account number, a CLABE, an IBAN, a
        spark wallet address, etc. The failure patterns are:

        - Account numbers ending in **002**: Insufficient funds (transfer-in
        will fail)

        - Account numbers ending in **003**: Account closed/invalid (transfers
        will fail)

        - Account numbers ending in **004**: Transfer rejected (bank rejects the
        transfer)

        - Account numbers ending in **005**: Timeout/delayed failure (stays
        pending ~30s, then fails)

        - Any other account number: Success (transfers complete normally)
      operationId: createCustomerExternalAccount
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExternalAccountCreateRequest'
            examples:
              usBankAccount:
                summary: Create external US bank account
                value:
                  customerId: Customer:019542f5-b3e7-1d02-0000-000000000001
                  currency: USD
                  accountInfo:
                    accountType: US_ACCOUNT
                    accountNumber: '12345678901'
                    routingNumber: '123456789'
                    accountCategory: CHECKING
                    bankName: Chase Bank
                    platformAccountId: ext_acc_123456
                    beneficiary:
                      beneficiaryType: INDIVIDUAL
                      fullName: John Doe
                      birthDate: '1990-01-15'
                      nationality: US
                      address:
                        line1: 123 Main Street
                        city: San Francisco
                        state: CA
                        postalCode: '94105'
                        country: US
              sparkWallet:
                summary: Create external Spark wallet
                value:
                  customerId: Customer:019542f5-b3e7-1d02-0000-000000000001
                  currency: BTC
                  accountInfo:
                    accountType: SPARK_WALLET
                    address: >-
                      spark1pgssyuuuhnrrdjswal5c3s3rafw9w3y5dd4cjy3duxlf7hjzkp0rqx6dj6mrhu
      responses:
        '201':
          description: External account created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExternalAccount'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error400'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error401'
        '409':
          description: Conflict - External account already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error409'
        '500':
          description: Internal service error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error500'
      security:
        - BasicAuth: []
components:
  schemas:
    ExternalAccountCreateRequest:
      allOf:
        - type: object
          required:
            - currency
            - accountInfo
          properties:
            customerId:
              type: string
              description: >-
                The ID of the customer for whom to create the external account.
                If not provided, the external account will be created on behalf
                of the platform.
              example: Customer:019542f5-b3e7-1d02-0000-000000000001
            currency:
              type: string
              description: The ISO 4217 currency code
              example: USD
            platformAccountId:
              type: string
              description: >-
                Your platform's identifier for the account in your system. This
                can be used to reference the account by your own identifier.
              example: ext_acc_123456
            defaultUmaDepositAccount:
              type: boolean
              description: >-
                Whether to set the external account as the default UMA deposit
                account. When set to true, incoming payments to this customer's
                UMA address will be automatically deposited into this external
                account. False if not provided. Note that only one external
                account can be set as the default UMA deposit account for a
                customer, so if there is already a default UMA deposit account,
                this will override the existing default UMA deposit account. If
                there is no default UMA deposit account, incoming UMA payments
                will be deposited into the primary internal account for the
                customer.
              default: false
            accountInfo:
              $ref: '#/components/schemas/ExternalAccountInfoOneOf'
    ExternalAccount:
      allOf:
        - type: object
          required:
            - id
            - status
            - currency
            - accountInfo
          properties:
            id:
              type: string
              description: The system generated identifier of this account
              example: ExternalAccount:e85dcbd6-dced-4ec4-b756-3c3a9ea3d965
            customerId:
              type: string
              description: >-
                The customer this account is tied to, or null if the account is
                on behalf of the platform.
              example: Customer:da459a29-1fb7-41ce-a4cb-eb3a3c9fd7a7
            status:
              $ref: '#/components/schemas/ExternalAccountStatus'
              description: Status of the external account
              example: ACTIVE
            platformAccountId:
              type: string
              description: Optional platform-specific identifier for this account
              example: acc_123456789
            currency:
              type: string
              description: The ISO 4217 currency code
              example: USD
            defaultUmaDepositAccount:
              type: boolean
              description: >-
                Whether this account is the default UMA deposit account for the
                customer. If true, incoming UMA payments to this customer's UMA
                address will be automatically deposited into this account
                instead of the primary internal account. False if not provided.
                Note that at most, one external account can be set as the
                default UMA deposit account for a customer. If there is no
                default UMA deposit account, incoming UMA payments will be
                deposited into the primary internal account for the customer.
              example: false
            beneficiaryVerificationStatus:
              $ref: '#/components/schemas/BeneficiaryVerificationStatus'
              description: >-
                The result of verifying the beneficiary name against the account
                holder name
            beneficiaryVerifiedData:
              $ref: '#/components/schemas/BeneficiaryVerifiedData'
              description: >-
                Verified beneficiary data returned by the payment rail, if
                available
            accountInfo:
              $ref: '#/components/schemas/ExternalAccountInfoOneOf'
    Error400:
      type: object
      required:
        - message
        - status
        - code
      properties:
        status:
          type: integer
          enum:
            - 400
          description: HTTP status code
        code:
          type: string
          description: >
            | Error Code | Description |

            |------------|-------------|

            | INVALID_INPUT | Invalid input provided |

            | MISSING_MANDATORY_USER_INFO | Required customer information is
            missing |

            | INVITATION_ALREADY_CLAIMED | Invitation has already been claimed |

            | INVITATIONS_NOT_CONFIGURED | Invitations are not configured |

            | INVALID_UMA_ADDRESS | UMA address format is invalid |

            | INVITATION_CANCELLED | Invitation has been cancelled |

            | QUOTE_REQUEST_FAILED | An issue occurred during the quote process;
            this is retryable |

            | INVALID_PAYREQ_RESPONSE | Counterparty Payreq response was invalid
            |

            | INVALID_RECEIVER | Receiver is invalid |

            | PARSE_PAYREQ_RESPONSE_ERROR | Error parsing receiver PayReq
            response |

            | CERT_CHAIN_INVALID | Counterparty certificate chain is invalid |

            | CERT_CHAIN_EXPIRED | Counterparty certificate chain has expired |

            | INVALID_PUBKEY_FORMAT | Counterparty Public key format is invalid
            |

            | MISSING_REQUIRED_UMA_PARAMETERS | Counterparty required UMA
            parameters are missing |

            | SENDER_NOT_ACCEPTED | Sender is not accepted |

            | AMOUNT_OUT_OF_RANGE | Amount is out of range |

            | INVALID_CURRENCY | Currency is invalid |

            | INVALID_TIMESTAMP | Timestamp is invalid |

            | INVALID_NONCE | Nonce is invalid |

            | INVALID_REQUEST_FORMAT | Request format is invalid |

            | INVALID_BANK_ACCOUNT | Bank account is invalid |

            | SELF_PAYMENT | Self payment not allowed |

            | LOOKUP_REQUEST_FAILED | Lookup request failed |

            | PARSE_LNURLP_RESPONSE_ERROR | Error parsing LNURLP response |

            | INVALID_AMOUNT | Amount is invalid |

            | WEBHOOK_ENDPOINT_NOT_SET | Webhook endpoint is not set |

            | WEBHOOK_DELIVERY_ERROR | Webhook delivery error |
          enum:
            - INVALID_INPUT
            - MISSING_MANDATORY_USER_INFO
            - INVITATION_ALREADY_CLAIMED
            - INVITATIONS_NOT_CONFIGURED
            - INVALID_UMA_ADDRESS
            - INVITATION_CANCELLED
            - QUOTE_REQUEST_FAILED
            - INVALID_PAYREQ_RESPONSE
            - INVALID_RECEIVER
            - PARSE_PAYREQ_RESPONSE_ERROR
            - CERT_CHAIN_INVALID
            - CERT_CHAIN_EXPIRED
            - INVALID_PUBKEY_FORMAT
            - MISSING_REQUIRED_UMA_PARAMETERS
            - SENDER_NOT_ACCEPTED
            - AMOUNT_OUT_OF_RANGE
            - INVALID_CURRENCY
            - INVALID_TIMESTAMP
            - INVALID_NONCE
            - INVALID_REQUEST_FORMAT
            - INVALID_BANK_ACCOUNT
            - SELF_PAYMENT
            - LOOKUP_REQUEST_FAILED
            - PARSE_LNURLP_RESPONSE_ERROR
            - INVALID_AMOUNT
            - WEBHOOK_ENDPOINT_NOT_SET
            - WEBHOOK_DELIVERY_ERROR
        message:
          type: string
          description: Error message
        details:
          type: object
          description: Additional error details
          additionalProperties: true
    Error401:
      type: object
      required:
        - message
        - status
        - code
      properties:
        status:
          type: integer
          enum:
            - 401
          description: HTTP status code
        code:
          type: string
          description: |
            | Error Code | Description |
            |------------|-------------|
            | UNAUTHORIZED | Issue with API credentials |
            | INVALID_SIGNATURE | Signature header is invalid |
          enum:
            - UNAUTHORIZED
            - INVALID_SIGNATURE
        message:
          type: string
          description: Error message
        details:
          type: object
          description: Additional error details
          additionalProperties: true
    Error409:
      type: object
      required:
        - message
        - status
        - code
      properties:
        status:
          type: integer
          enum:
            - 409
          description: HTTP status code
        code:
          type: string
          description: >
            | Error Code | Description |

            |------------|-------------|

            | TRANSACTION_NOT_PENDING_PLATFORM_APPROVAL | Transaction is not
            pending platform approval |

            | UMA_ADDRESS_EXISTS | UMA address already exists |
          enum:
            - TRANSACTION_NOT_PENDING_PLATFORM_APPROVAL
            - UMA_ADDRESS_EXISTS
        message:
          type: string
          description: Error message
        details:
          type: object
          description: Additional error details
          additionalProperties: true
    Error500:
      type: object
      required:
        - message
        - status
        - code
      properties:
        status:
          type: integer
          enum:
            - 500
          description: HTTP status code
        code:
          type: string
          description: |
            | Error Code | Description |
            |------------|-------------|
            | GRID_SWITCH_ERROR | Grid switch error |
            | INTERNAL_ERROR | Internal server or UMA error |
          enum:
            - GRID_SWITCH_ERROR
            - INTERNAL_ERROR
        message:
          type: string
          description: Error message
        details:
          type: object
          description: Additional error details
          additionalProperties: true
    ExternalAccountInfoOneOf:
      oneOf:
        - $ref: '#/components/schemas/UsAccountExternalAccountInfo'
          title: US Account
        - $ref: '#/components/schemas/ClabeAccountExternalAccountInfo'
          title: CLABE Account
        - $ref: '#/components/schemas/PixAccountExternalAccountInfo'
          title: PIX Account
        - $ref: '#/components/schemas/IbanAccountExternalAccountInfo'
          title: IBAN Account
        - $ref: '#/components/schemas/UpiAccountExternalAccountInfo'
          title: UPI Account
        - $ref: '#/components/schemas/NgnAccountExternalAccountInfo'
          title: NGN Account
        - $ref: '#/components/schemas/CadAccountExternalAccountInfo'
          title: CAD Account
        - $ref: '#/components/schemas/GbpAccountExternalAccountInfo'
          title: GBP Account
        - $ref: '#/components/schemas/PhpAccountExternalAccountInfo'
          title: PHP Account
        - $ref: '#/components/schemas/SgdAccountExternalAccountInfo'
          title: SGD Account
        - $ref: '#/components/schemas/SparkWalletExternalAccountInfo'
          title: Spark Wallet
        - $ref: '#/components/schemas/LightningExternalAccountInfo'
          title: Lightning
        - $ref: '#/components/schemas/SolanaWalletExternalAccountInfo'
          title: Solana Wallet
        - $ref: '#/components/schemas/TronWalletExternalAccountInfo'
          title: Tron Wallet
        - $ref: '#/components/schemas/PolygonWalletExternalAccountInfo'
          title: Polygon Wallet
        - $ref: '#/components/schemas/BaseWalletExternalAccountInfo'
          title: Base Wallet
      discriminator:
        propertyName: accountType
        mapping:
          US_ACCOUNT:
            $ref: '#/components/schemas/UsAccountExternalAccountInfo'
          CLABE:
            $ref: '#/components/schemas/ClabeAccountExternalAccountInfo'
          PIX:
            $ref: '#/components/schemas/PixAccountExternalAccountInfo'
          IBAN:
            $ref: '#/components/schemas/IbanAccountExternalAccountInfo'
          UPI:
            $ref: '#/components/schemas/UpiAccountExternalAccountInfo'
          NGN_ACCOUNT:
            $ref: '#/components/schemas/NgnAccountExternalAccountInfo'
          CAD_ACCOUNT:
            $ref: '#/components/schemas/CadAccountExternalAccountInfo'
          GBP_ACCOUNT:
            $ref: '#/components/schemas/GbpAccountExternalAccountInfo'
          PHP_ACCOUNT:
            $ref: '#/components/schemas/PhpAccountExternalAccountInfo'
          SGD_ACCOUNT:
            $ref: '#/components/schemas/SgdAccountExternalAccountInfo'
          SPARK_WALLET:
            $ref: '#/components/schemas/SparkWalletExternalAccountInfo'
          LIGHTNING:
            $ref: '#/components/schemas/LightningExternalAccountInfo'
          SOLANA_WALLET:
            $ref: '#/components/schemas/SolanaWalletExternalAccountInfo'
          TRON_WALLET:
            $ref: '#/components/schemas/TronWalletExternalAccountInfo'
          POLYGON_WALLET:
            $ref: '#/components/schemas/PolygonWalletExternalAccountInfo'
          BASE_WALLET:
            $ref: '#/components/schemas/BaseWalletExternalAccountInfo'
    ExternalAccountStatus:
      type: string
      enum:
        - PENDING
        - ACTIVE
        - UNDER_REVIEW
        - INACTIVE
      description: Status of an external account
    BeneficiaryVerificationStatus:
      type: string
      enum:
        - MATCHED
        - PARTIAL_MATCH
        - NOT_MATCHED
        - UNSUPPORTED
        - CHECKED_BY_RECEIVING_FI
        - PENDING
      description: >
        The result of verifying the beneficiary name against the account holder
        name.


        | Status | Description |

        |--------|-------------|

        | `MATCHED` | The beneficiary name is an exact match |

        | `PARTIAL_MATCH` | The beneficiary name is a fuzzy match |

        | `NOT_MATCHED` | The beneficiary name does not match |

        | `UNSUPPORTED` | The payment rail does not support name verification |

        | `CHECKED_BY_RECEIVING_FI` | Verification is deferred to the receiving
        financial institution (e.g. ACH) |

        | `PENDING` | Verification is still in progress |
    BeneficiaryVerifiedData:
      type: object
      properties:
        fullName:
          type: string
          description: >-
            The verified full name of the account holder as returned by the
            payment rail
          example: John Doe
    UsAccountExternalAccountInfo:
      allOf:
        - $ref: '#/components/schemas/BaseExternalAccountInfo'
        - $ref: '#/components/schemas/UsAccountInfo'
        - type: object
          required:
            - beneficiary
          properties:
            beneficiary:
              $ref: '#/components/schemas/BeneficiaryOneOf'
    ClabeAccountExternalAccountInfo:
      allOf:
        - $ref: '#/components/schemas/BaseExternalAccountInfo'
        - $ref: '#/components/schemas/ClabeAccountInfo'
        - type: object
          required:
            - beneficiary
          properties:
            beneficiary:
              $ref: '#/components/schemas/BeneficiaryOneOf'
    PixAccountExternalAccountInfo:
      allOf:
        - $ref: '#/components/schemas/BaseExternalAccountInfo'
        - $ref: '#/components/schemas/PixAccountInfo'
        - type: object
          required:
            - beneficiary
          properties:
            beneficiary:
              $ref: '#/components/schemas/BeneficiaryOneOf'
    IbanAccountExternalAccountInfo:
      allOf:
        - $ref: '#/components/schemas/BaseExternalAccountInfo'
        - $ref: '#/components/schemas/IbanAccountInfo'
        - type: object
          required:
            - beneficiary
          properties:
            beneficiary:
              $ref: '#/components/schemas/BeneficiaryOneOf'
    UpiAccountExternalAccountInfo:
      allOf:
        - $ref: '#/components/schemas/BaseExternalAccountInfo'
        - $ref: '#/components/schemas/UpiAccountInfo'
        - type: object
          required:
            - beneficiary
          properties:
            beneficiary:
              $ref: '#/components/schemas/BeneficiaryOneOf'
    NgnAccountExternalAccountInfo:
      allOf:
        - $ref: '#/components/schemas/BaseExternalAccountInfo'
        - $ref: '#/components/schemas/NgnAccountInfo'
        - type: object
          required:
            - purposeOfPayment
            - beneficiary
          properties:
            purposeOfPayment:
              type: string
              enum:
                - GIFT
                - SELF
                - GOODS_OR_SERVICES
                - EDUCATION
                - HEALTH_OR_MEDICAL
                - REAL_ESTATE_PURCHASE
                - LOAN_PAYMENT
                - TAX_PAYMENT
                - UTILITY_BILL
                - DONATION
                - TRAVEL
                - OTHER
              description: Purpose of payment
              example: GOODS_OR_SERVICES
            beneficiary:
              $ref: '#/components/schemas/BeneficiaryOneOf'
    CadAccountExternalAccountInfo:
      allOf:
        - $ref: '#/components/schemas/BaseExternalAccountInfo'
        - $ref: '#/components/schemas/CadAccountInfo'
        - type: object
          required:
            - beneficiary
          properties:
            beneficiary:
              $ref: '#/components/schemas/BeneficiaryOneOf'
    GbpAccountExternalAccountInfo:
      allOf:
        - $ref: '#/components/schemas/BaseExternalAccountInfo'
        - $ref: '#/components/schemas/GbpAccountInfo'
        - type: object
          required:
            - beneficiary
          properties:
            beneficiary:
              $ref: '#/components/schemas/BeneficiaryOneOf'
    PhpAccountExternalAccountInfo:
      allOf:
        - $ref: '#/components/schemas/BaseExternalAccountInfo'
        - $ref: '#/components/schemas/PhpAccountInfo'
        - type: object
          required:
            - beneficiary
          properties:
            beneficiary:
              $ref: '#/components/schemas/BeneficiaryOneOf'
    SgdAccountExternalAccountInfo:
      allOf:
        - $ref: '#/components/schemas/BaseExternalAccountInfo'
        - $ref: '#/components/schemas/SgdAccountInfo'
        - type: object
          required:
            - beneficiary
          properties:
            beneficiary:
              $ref: '#/components/schemas/BeneficiaryOneOf'
    SparkWalletExternalAccountInfo:
      allOf:
        - $ref: '#/components/schemas/BaseExternalAccountInfo'
        - $ref: '#/components/schemas/SparkWalletInfo'
    LightningExternalAccountInfo:
      allOf:
        - $ref: '#/components/schemas/BaseExternalAccountInfo'
        - $ref: '#/components/schemas/LightningInfo'
    SolanaWalletExternalAccountInfo:
      allOf:
        - $ref: '#/components/schemas/BaseExternalAccountInfo'
        - $ref: '#/components/schemas/SolanaWalletInfo'
    TronWalletExternalAccountInfo:
      allOf:
        - $ref: '#/components/schemas/BaseExternalAccountInfo'
        - $ref: '#/components/schemas/TronWalletInfo'
    PolygonWalletExternalAccountInfo:
      allOf:
        - $ref: '#/components/schemas/BaseExternalAccountInfo'
        - $ref: '#/components/schemas/PolygonWalletInfo'
    BaseWalletExternalAccountInfo:
      allOf:
        - $ref: '#/components/schemas/BaseExternalAccountInfo'
        - $ref: '#/components/schemas/BaseWalletInfo'
    BaseExternalAccountInfo:
      type: object
      required:
        - accountType
      properties:
        accountType:
          $ref: '#/components/schemas/ExternalAccountType'
      discriminator:
        propertyName: accountType
        mapping:
          US_ACCOUNT:
            $ref: '#/components/schemas/UsAccountExternalAccountInfo'
          CLABE:
            $ref: '#/components/schemas/ClabeAccountExternalAccountInfo'
          PIX:
            $ref: '#/components/schemas/PixAccountExternalAccountInfo'
          IBAN:
            $ref: '#/components/schemas/IbanAccountExternalAccountInfo'
          UPI:
            $ref: '#/components/schemas/UpiAccountExternalAccountInfo'
          NGN_ACCOUNT:
            $ref: '#/components/schemas/NgnAccountExternalAccountInfo'
          CAD_ACCOUNT:
            $ref: '#/components/schemas/CadAccountExternalAccountInfo'
          GBP_ACCOUNT:
            $ref: '#/components/schemas/GbpAccountExternalAccountInfo'
          PHP_ACCOUNT:
            $ref: '#/components/schemas/PhpAccountExternalAccountInfo'
          SGD_ACCOUNT:
            $ref: '#/components/schemas/SgdAccountExternalAccountInfo'
          SPARK_WALLET:
            $ref: '#/components/schemas/SparkWalletExternalAccountInfo'
          LIGHTNING:
            $ref: '#/components/schemas/LightningExternalAccountInfo'
          SOLANA_WALLET:
            $ref: '#/components/schemas/SolanaWalletExternalAccountInfo'
          TRON_WALLET:
            $ref: '#/components/schemas/TronWalletExternalAccountInfo'
          POLYGON_WALLET:
            $ref: '#/components/schemas/PolygonWalletExternalAccountInfo'
          BASE_WALLET:
            $ref: '#/components/schemas/BaseWalletExternalAccountInfo'
    UsAccountInfo:
      type: object
      required:
        - accountNumber
        - routingNumber
        - accountCategory
        - accountType
      properties:
        accountType:
          type: string
          enum:
            - US_ACCOUNT
        accountNumber:
          type: string
          description: US bank account number
          example: '123456789'
        routingNumber:
          type: string
          description: ACH routing number (9 digits)
          example: '987654321'
          minLength: 9
          maxLength: 9
          pattern: ^[0-9]{9}$
        accountCategory:
          type: string
          enum:
            - CHECKING
            - SAVINGS
          description: Type of account (checking or savings)
          example: CHECKING
        bankName:
          type: string
          description: Name of the bank
          example: Chase Bank
    BeneficiaryOneOf:
      oneOf:
        - $ref: '#/components/schemas/IndividualBeneficiary'
          title: Individual Beneficiary
        - $ref: '#/components/schemas/BusinessBeneficiary'
          title: Business Beneficiary
      discriminator:
        propertyName: beneficiaryType
        mapping:
          INDIVIDUAL:
            $ref: '#/components/schemas/IndividualBeneficiary'
          BUSINESS:
            $ref: '#/components/schemas/BusinessBeneficiary'
    ClabeAccountInfo:
      type: object
      required:
        - clabeNumber
        - accountType
      properties:
        accountType:
          type: string
          enum:
            - CLABE
        clabeNumber:
          type: string
          description: 18-digit CLABE number (Mexican banking standard)
          example: '123456789012345678'
          minLength: 18
          maxLength: 18
          pattern: ^[0-9]{18}$
    PixAccountInfo:
      type: object
      required:
        - pixKey
        - pixKeyType
        - taxId
        - accountType
      properties:
        accountType:
          type: string
          enum:
            - PIX
        pixKey:
          type: string
          description: PIX key for Brazilian instant payments
          example: '55119876543210'
        pixKeyType:
          type: string
          enum:
            - CPF
            - CNPJ
            - EMAIL
            - PHONE
            - RANDOM
          description: Type of PIX key being used
          example: PHONE
        taxId:
          type: string
          description: Tax ID of the account holder
          example: '1234567890'
    IbanAccountInfo:
      type: object
      required:
        - iban
        - swiftBic
        - accountType
      properties:
        accountType:
          type: string
          enum:
            - IBAN
        iban:
          type: string
          description: International Bank Account Number
          example: DE89370400440532013000
          minLength: 15
          maxLength: 34
        swiftBic:
          type: string
          description: SWIFT/BIC code (8 or 11 characters)
          example: DEUTDEFF
          minLength: 8
          maxLength: 11
          pattern: ^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?$
    UpiAccountInfo:
      type: object
      required:
        - vpa
        - accountType
      properties:
        accountType:
          type: string
          enum:
            - UPI
        vpa:
          type: string
          description: Virtual Payment Address for UPI payments
          example: somecustomers@okbank
    NgnAccountInfo:
      type: object
      required:
        - accountNumber
        - bankName
        - accountType
      properties:
        accountType:
          type: string
          enum:
            - NGN_ACCOUNT
        accountNumber:
          type: string
          description: Nigerian bank account number
          example: '0123456789'
          minLength: 10
          maxLength: 10
          pattern: ^[0-9]{10}$
        bankName:
          type: string
          description: Name of the bank
          example: First Bank of Nigeria
    CadAccountInfo:
      type: object
      required:
        - bankCode
        - branchCode
        - accountNumber
        - accountType
      properties:
        accountType:
          type: string
          enum:
            - CAD_ACCOUNT
        bankCode:
          type: string
          description: Canadian financial institution number (3 digits)
          example: '001'
          minLength: 3
          maxLength: 3
          pattern: ^[0-9]{3}$
        branchCode:
          type: string
          description: Transit number identifying the branch (5 digits)
          example: '00012'
          minLength: 5
          maxLength: 5
          pattern: ^[0-9]{5}$
        accountNumber:
          type: string
          description: Bank account number (7-12 digits)
          example: '1234567'
          minLength: 7
          maxLength: 12
          pattern: ^[0-9]{7,12}$
    GbpAccountInfo:
      type: object
      required:
        - sortCode
        - accountNumber
        - accountType
      properties:
        accountType:
          type: string
          enum:
            - GBP_ACCOUNT
        sortCode:
          type: string
          description: UK bank sort code (6 digits, may include hyphens)
          example: 20-00-00
          pattern: ^[0-9]{2}-?[0-9]{2}-?[0-9]{2}$
        accountNumber:
          type: string
          description: UK bank account number (8 digits)
          example: '12345678'
          minLength: 8
          maxLength: 8
          pattern: ^[0-9]{8}$
    PhpAccountInfo:
      type: object
      required:
        - bankName
        - accountNumber
        - accountType
      properties:
        accountType:
          type: string
          enum:
            - PHP_ACCOUNT
        bankName:
          type: string
          description: Name of the beneficiary's bank
          example: BDO Unibank
        accountNumber:
          type: string
          description: Bank account number
          example: '001234567890'
    SgdAccountInfo:
      type: object
      required:
        - bankName
        - swiftCode
        - accountNumber
        - accountType
      properties:
        accountType:
          type: string
          enum:
            - SGD_ACCOUNT
        bankName:
          type: string
          description: Name of the beneficiary's bank
          example: DBS Bank Ltd
        swiftCode:
          type: string
          description: SWIFT/BIC code (8 or 11 characters)
          example: DBSSSGSG
          minLength: 8
          maxLength: 11
          pattern: ^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?$
        accountNumber:
          type: string
          description: Bank account number
          example: '0123456789'
    SparkWalletInfo:
      type: object
      required:
        - address
        - accountType
      properties:
        accountType:
          type: string
          enum:
            - SPARK_WALLET
        address:
          type: string
          description: Spark wallet address
          example: spark1pgssyuuuhnrrdjswal5c3s3rafw9w3y5dd4cjy3duxlf7hjzkp0rqx6dj6mrhu
    LightningInfo:
      type: object
      description: >
        Lightning payment destination. Exactly one of `invoice`, `bolt12`, or
        `lightningAddress` must be provided.
      required:
        - accountType
      properties:
        accountType:
          type: string
          enum:
            - LIGHTNING
        invoice:
          type: string
          description: 1-time use lightning bolt11 invoice payout destination
          example: >-
            lnbc15u1p3xnhl2pp5jptserfk3zk4qy42tlucycrfwxhydvlemu9pqr93tuzlv9cc7g3sdqsvfhkcap3xyhx7un8cqzpgxqzjcsp5f8c52y2stc300gl6s4xswtjpc37hrnnr3c9wvtgjfuvqmpm35evq9qyyssqy4lgd8tj637qcjp05rdpxxykjenthxftej7a2zzmwrmrl70fyj9hvj0rewhzj7jfyuwkwcg9g2jpwtk3wkjtwnkdks84hsnu8xps5vsq4gj5hs
        bolt12:
          type: string
          description: A bolt12 offer which can be reused as a payment destination
          example: >-
            lnbc15u1p3xnhl2pp5jptserfk3zk4qy42tlucycrfwxhydvlemu9pqr93tuzlv9cc7g3sdqsvfhkcap3xyhx7un8cqzpgxqzjcsp5f8c52y2stc300gl6s4xswtjpc37hrnnr3c9wvtgjfuvqmpm35evq9qyyssqy4lgd8tj637qcjp05rdpxxykjenthxftej7a2zzmwrmrl70fyj9hvj0rewhzj7jfyuwkwcg9g2jpwtk3wkjtwnkdks84hsnu8xps5vsq4gj5hs
        lightningAddress:
          type: string
          description: >-
            A lightning address which can be used as a payment destination. Note
            that for UMA addresses, no external account is needed. You can use
            the UMA address directly as a destination.
          example: john.doe@lightningwallet.com
    SolanaWalletInfo:
      type: object
      required:
        - address
        - accountType
      properties:
        accountType:
          type: string
          enum:
            - SOLANA_WALLET
        address:
          type: string
          description: Solana wallet address
          example: 4Nd1m6Qkq7RfKuE5vQ9qP9Tn6H94Ueqb4xXHzsAbd8Wg
    TronWalletInfo:
      type: object
      required:
        - address
        - accountType
      properties:
        accountType:
          type: string
          enum:
            - TRON_WALLET
        address:
          type: string
          description: Tron wallet address
          example: TNPeeaaFB7K9cmo4uQpcU32zGK8G1NYqeL
    PolygonWalletInfo:
      type: object
      required:
        - address
        - accountType
      properties:
        accountType:
          type: string
          enum:
            - POLYGON_WALLET
        address:
          type: string
          description: Polygon eth wallet address
          example: '0xAbCDEF1234567890aBCdEf1234567890ABcDef12'
    BaseWalletInfo:
      type: object
      required:
        - address
        - accountType
      properties:
        accountType:
          type: string
          enum:
            - BASE_WALLET
        address:
          type: string
          description: Base eth wallet address
          example: '0xAbCDEF1234567890aBCdEf1234567890ABcDef12'
    ExternalAccountType:
      type: string
      enum:
        - US_ACCOUNT
        - CLABE
        - PIX
        - IBAN
        - UPI
        - NGN_ACCOUNT
        - CAD_ACCOUNT
        - GBP_ACCOUNT
        - PHP_ACCOUNT
        - SGD_ACCOUNT
        - SPARK_WALLET
        - LIGHTNING
        - SOLANA_WALLET
        - TRON_WALLET
        - POLYGON_WALLET
        - BASE_WALLET
      description: Type of external account or wallet
      example: US_ACCOUNT
    IndividualBeneficiary:
      allOf:
        - $ref: '#/components/schemas/BaseBeneficiary'
        - type: object
          required:
            - fullName
            - birthDate
            - nationality
            - beneficiaryType
          properties:
            beneficiaryType:
              type: string
              enum:
                - INDIVIDUAL
            fullName:
              type: string
              description: Individual's full name
              example: John Michael Doe
            birthDate:
              type: string
              format: date
              description: Date of birth in ISO 8601 format (YYYY-MM-DD)
              example: '1990-01-15'
            nationality:
              type: string
              description: Country code (ISO 3166-1 alpha-2)
              example: US
    BusinessBeneficiary:
      allOf:
        - $ref: '#/components/schemas/BaseBeneficiary'
        - type: object
          required:
            - legalName
            - beneficiaryType
          properties:
            beneficiaryType:
              type: string
              enum:
                - BUSINESS
            legalName:
              type: string
              description: Legal name of the business
              example: Acme Corporation, Inc.
            registrationNumber:
              type: string
              description: Business registration number
              example: BRN-123456789
            taxId:
              type: string
              description: Tax identification number
              example: EIN-987654321
    BaseBeneficiary:
      type: object
      required:
        - beneficiaryType
      properties:
        beneficiaryType:
          $ref: '#/components/schemas/BeneficiaryType'
        address:
          $ref: '#/components/schemas/Address'
      discriminator:
        propertyName: beneficiaryType
        mapping:
          INDIVIDUAL:
            $ref: '#/components/schemas/IndividualBeneficiary'
          BUSINESS:
            $ref: '#/components/schemas/BusinessBeneficiary'
    BeneficiaryType:
      type: string
      enum:
        - INDIVIDUAL
        - BUSINESS
      description: Whether the beneficiary is an individual or a business entity
      example: INDIVIDUAL
    Address:
      type: object
      required:
        - line1
        - postalCode
        - country
      properties:
        line1:
          type: string
          description: Street address line 1
          example: 123 Main Street
        line2:
          type: string
          description: Street address line 2
          example: Apt 4B
        city:
          type: string
          description: City
          example: San Francisco
        state:
          type: string
          description: State/Province/Region
          example: CA
        postalCode:
          type: string
          description: Postal/ZIP code
          example: '94105'
        country:
          type: string
          description: Country code (ISO 3166-1 alpha-2)
          example: US
  securitySchemes:
    BasicAuth:
      type: http
      scheme: basic
      description: >-
        API token authentication using format `<api token id>:<api client
        secret>`
